リストの要素を変更する
======================

標準ライブラリーには、リストの要素を変更する関数がありません。

関数を定義するか、ライブラリーを使うかします。

関数を定義する
--------------

リストのn番目の要素を変更する関数はこのように書けます。

```haskell
replaceAt :: Int -> a -> [a] -> [a]
replaceAt _ _ []     = []
replaceAt 0 y (_:xs) = y : xs
replaceAt n y (x:xs) = x : replaceAt (n - 1) y xs
```

`replaceAt`は変更するのが0番目の要素であれば、リストの先頭を置き換えたて返します。

そうでなければ、先頭を除いたリストのn-1番目の要素を変更するように`replaceAt`を呼びます。

n=0にならずにリストが空になってしまった場合のために、空のリストに対しては空のリストを返すようにします。
このようにすれば、インデックスがリストの範囲外であったら何も変更せずに元のリストが返ります。

使ってみましょう。

```haskell
> replaceAt 0 100 [0..9]
[100,1,2,3,4,5,6,7,8,9]
> replaceAt 3 100 [0..9]
[0,1,2,100,4,5,6,7,8,9]
```

範囲外のインデックスでも試してみます。

```haskell
> replaceAt 20 100 [0..9]
[0,1,2,3,4,5,6,7,8,9]
> replaceAt (-1) 100 [0..9]
[0,1,2,3,4,5,6,7,8,9]
```


`Lens`を使う
------------

[Lens](https://hackage.haskell.org/package/lens)を使うとリストの要素は簡単に変更できます。

```haskell
-- lens
> import Control.Lens
> [0..9] & ix 3 .~ 100
[0,1,2,100,4,5,6,7,8,9]
```

範囲外のインデックスを試してみます。

```haskell
> [0..9] & ix 20 .~ 100
[0,1,2,3,4,5,6,7,8,9]
> [0..9] & ix (-1) .~ 100
[0,1,2,3,4,5,6,7,8,9]
```
